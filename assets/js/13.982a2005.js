(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{444:function(s,a,n){"use strict";n.r(a);var t=n(24),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"vue源码阅读记录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue源码阅读记录"}},[s._v("#")]),s._v(" vue源码阅读记录")]),s._v(" "),n("h2",{attrs:{id:"认识flow"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#认识flow"}},[s._v("#")]),s._v(" 认识Flow")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("Flow 是JavaScript 静态类型检查工具，由于JavaScript 是动态类型语言，只有在 "),n("em",[n("strong",[s._v("运行阶段")])]),s._v(" 才会进行类型检查，很多隐藏的bug没有办法在编译时就发觉，Vue.js 的源码利用了 Flow 做了静态类型检查")])]),s._v(" "),n("h3",{attrs:{id:"flow-的工作方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flow-的工作方式"}},[s._v("#")]),s._v(" Flow 的工作方式")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("类型推断：通过变量的使用上下文来推断出变量类型，然后根据这些推断来检查类型。")])]),s._v(" "),n("li",[n("p",[s._v("类型注释（类似 "),n("strong",[s._v("TypeScript")]),s._v(" ）：事先注释好的类型，Flow 会基于这些注释来判断")])])]),s._v(" "),n("h3",{attrs:{id:"flow再vue中的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flow再vue中的应用"}},[s._v("#")]),s._v(" Flow再vue中的应用")]),s._v(" "),n("ul",[n("li",[s._v("flow 文件夹中包含了vue中使用的自定义类型")]),s._v(" "),n("li",[s._v(".flowconfig为flow的配置文件")])]),s._v(" "),n("div",{staticClass:"language-markdown line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-markdown"}},[n("code",[s._v("[ignore]\n."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("/node_modules/.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\n."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("/test/.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\n."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("/scripts/.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\n."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("/examples/.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\n."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("/benchmarks/.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\n\n[include]\n\n[libs]\nflow\n\n[options]\nunsafe.enable_getters_and_setters=true\nmodule.name_mapper='^compiler/\\(."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("\\)$' -> '<PROJECT_ROOT>/src/compiler/\\1'\nmodule.name_mapper='^core/\\(.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\\)$' -> '"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("PROJECT_ROOT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("/src/core/\\1'\nmodule.name_mapper='^shared/\\(."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("\\)$' -> '<PROJECT_ROOT>/src/shared/\\1'\nmodule.name_mapper='^web/\\(.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\\)$' -> '"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("PROJECT_ROOT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("/src/platforms/web/\\1'\nmodule.name_mapper='^weex/\\(."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("\\)$' -> '<PROJECT_ROOT>/src/platforms/weex/\\1'\nmodule.name_mapper='^server/\\(.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\\)$' -> '"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("PROJECT_ROOT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("/src/server/\\1'\nmodule.name_mapper='^entries/\\(."),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("\\)$' -> '<PROJECT_ROOT>/src/entries/\\1'\nmodule.name_mapper='^sfc/\\(.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("*")])]),s._v("\\)$' -> '"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("PROJECT_ROOT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("/src/sfc/\\1'\nsuppress_comment= \\\\(.\\\\|\\n\\\\)*\\\\$flow-disable-line\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h2",{attrs:{id:"认识目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#认识目录结构"}},[s._v("#")]),s._v(" 认识目录结构")]),s._v(" "),n("div",{staticClass:"language-markdown line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-markdown"}},[n("code",[s._v("├── scripts ------------------------------- 构建相关的文件，一般情况下我们不需要动\n│   ├── git-hooks ------------------------- 存放git钩子的目录\n│   ├── alias.js -------------------------- 别名配置\n│   ├── config.js ------------------------- 生成rollup配置的文件\n│   ├── build.js -------------------------- 对 config.js 中所有的rollup配置进行构建\n│   ├── ci.sh ----------------------------- 持续集成运行的脚本\n│   ├── release.sh ------------------------ 用于自动发布新版本的脚本\n├── dist ---------------------------------- 构建后文件的输出目录\n├── examples ------------------------------ 存放一些使用Vue开发的应用案例\n├── flow ---------------------------------- 类型声明，使用开源项目 \n"),n("span",{pre:!0,attrs:{class:"token url"}},[s._v("["),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("Flow")]),s._v("]("),n("span",{pre:!0,attrs:{class:"token url"}},[s._v("https://flowtype.org/")]),s._v(")")]),s._v("\n├── packages ------------------------------ 存放独立发布的包的目录\n├── test ---------------------------------- 包含所有测试文件\n├── src ----------------------------------- 这个是我们最应该关注的目录，包含了源码\n│   ├── compiler -------------------------- 编译器代码的存放目录，将 template 编译为 render 函数\n│   ├── core ------------------------------ 存放通用的，与平台无关的代码\n│   │   ├── observer ---------------------- 响应系统，包含数据观测的核心代码\n│   │   ├── vdom -------------------------- 包含虚拟DOM创建(creation)和打补丁(patching)的代码\n│   │   ├── instance ---------------------- 包含Vue构造函数设计相关的代码\n│   │   ├── global-api -------------------- 包含给Vue构造函数挂载全局方法(静态方法)或属性的代码\n│   │   ├── components -------------------- 包含抽象出来的通用组件\n│   ├── server ---------------------------- 包含服务端渲染(server-side rendering)的相关代码\n│   ├── platforms ------------------------- 包含平台特有的相关代码，不同平台的不同构建的入口文件也在这里\n│   │   ├── web --------------------------- web平台\n│   │   │   ├── entry-runtime.js ---------- 运行时构建的入口，不包含模板(template)到render函数的编译器，所以不支持 "),n("span",{pre:!0,attrs:{class:"token code-snippet code keyword"}},[s._v("`template`")]),s._v(" 选项，我们使用vue默认导出的就是这个运行时的版本。大家使用的时候要注意\n│   │   │   ├── entry-runtime-with-compiler.js -- 独立构建版本的入口，它在 entry-runtime 的基础上添加了模板(template)到render函数的编译器\n│   │   │   ├── entry-compiler.js --------- vue-template-compiler 包的入口文件\n│   │   │   ├── entry-server-renderer.js -- vue-server-renderer 包的入口文件\n│   │   │   ├── entry-server-basic-renderer.js -- 输出 packages/vue-server-renderer/basic.js 文件\n│   │   ├── weex -------------------------- 混合应用\n│   ├── sfc ------------------------------- 包含单文件组件(.vue文件)的解析逻辑，用于vue-template-compiler包\n│   ├── shared ---------------------------- 包含整个代码库通用的代码\n├── package.json -------------------------- 不解释\n├── yarn.lock ----------------------------- yarn 锁定文件\n├── .editorconfig ------------------------- 针对编辑器的编码风格配置文件\n├── .flowconfig --------------------------- flow 的配置文件\n├── .babelrc ------------------------------ babel 配置文件\n├── .eslintrc ----------------------------- eslint 配置文件\n├── .eslintignore ------------------------- eslint 忽略配置\n├── .gitignore ---------------------------- git 忽略配置\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("h2",{attrs:{id:""}},[n("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])])])}),[],!1,null,null,null);a.default=e.exports}}]);