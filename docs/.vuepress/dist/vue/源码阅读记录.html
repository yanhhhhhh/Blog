<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue源码阅读记录 | 前端小册</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/logo.png">
    <meta name="description" content="记录前端的相关知识">
    
    <link rel="preload" href="/blog/assets/css/0.styles.9e7c0a0e.css" as="style"><link rel="preload" href="/blog/assets/js/app.61bc70fd.js" as="script"><link rel="preload" href="/blog/assets/js/2.c359e15b.js" as="script"><link rel="preload" href="/blog/assets/js/12.4cc5bca1.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.ee944dd1.js"><link rel="prefetch" href="/blog/assets/js/11.b3af88c1.js"><link rel="prefetch" href="/blog/assets/js/13.59725412.js"><link rel="prefetch" href="/blog/assets/js/3.f2e6b6af.js"><link rel="prefetch" href="/blog/assets/js/4.2cee2836.js"><link rel="prefetch" href="/blog/assets/js/5.9d99c1ce.js"><link rel="prefetch" href="/blog/assets/js/6.7fc3164e.js"><link rel="prefetch" href="/blog/assets/js/7.c50179d1.js"><link rel="prefetch" href="/blog/assets/js/8.70f01079.js"><link rel="prefetch" href="/blog/assets/js/9.6e5e7a53.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.9e7c0a0e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端小册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/源码阅读记录.html" class="nav-link">
  源码阅读记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JavaScript/Object.html" class="nav-link">
  Object
</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/Tips.html" class="nav-link">
  小技巧
</a></li></ul></div></div><div class="nav-item"><a href="https://vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  外部链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/vue/源码阅读记录.html" class="nav-link">
  源码阅读记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/JavaScript/Object.html" class="nav-link">
  Object
</a></li><li class="dropdown-item"><!----> <a href="/blog/JavaScript/Tips.html" class="nav-link">
  小技巧
</a></li></ul></div></div><div class="nav-item"><a href="https://vuepress.vuejs.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  外部链接
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" class="sidebar-link">首页</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/vue/源码阅读记录.html" class="active sidebar-link">源码阅读记录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/vue/源码阅读记录.html#认识flow" class="sidebar-link">认识Flow</a></li><li class="sidebar-sub-header"><a href="/blog/vue/源码阅读记录.html#认识目录结构" class="sidebar-link">认识目录结构</a></li><li class="sidebar-sub-header"><a href="/blog/vue/源码阅读记录.html#" class="sidebar-link"></a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面试</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue源码阅读记录"><a href="#vue源码阅读记录" class="header-anchor">#</a> vue源码阅读记录</h1> <h2 id="认识flow"><a href="#认识flow" class="header-anchor">#</a> 认识Flow</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Flow 是JavaScript 静态类型检查工具，由于JavaScript 是动态类型语言，只有在 <em><strong>运行阶段</strong></em> 才会进行类型检查，很多隐藏的bug没有办法在编译时就发觉，Vue.js 的源码利用了 Flow 做了静态类型检查</p></div> <h3 id="flow-的工作方式"><a href="#flow-的工作方式" class="header-anchor">#</a> Flow 的工作方式</h3> <ol><li><p>类型推断：通过变量的使用上下文来推断出变量类型，然后根据这些推断来检查类型。</p></li> <li><p>类型注释（类似 <strong>TypeScript</strong> ）：事先注释好的类型，Flow 会基于这些注释来判断</p></li></ol> <h3 id="flow再vue中的应用"><a href="#flow再vue中的应用" class="header-anchor">#</a> Flow再vue中的应用</h3> <ul><li>flow 文件夹中包含了vue中使用的自定义类型</li> <li>.flowconfig为flow的配置文件</li></ul> <div class="language-markdown line-numbers-mode"><pre class="language-markdown"><code>[ignore]
.<span class="token italic"><span class="token punctuation">*</span><span class="token content">/node_modules/.</span><span class="token punctuation">*</span></span>
.<span class="token italic"><span class="token punctuation">*</span><span class="token content">/test/.</span><span class="token punctuation">*</span></span>
.<span class="token italic"><span class="token punctuation">*</span><span class="token content">/scripts/.</span><span class="token punctuation">*</span></span>
.<span class="token italic"><span class="token punctuation">*</span><span class="token content">/examples/.</span><span class="token punctuation">*</span></span>
.<span class="token italic"><span class="token punctuation">*</span><span class="token content">/benchmarks/.</span><span class="token punctuation">*</span></span>

[include]

[libs]
flow

[options]
unsafe.enable_getters_and_setters=true
module.name_mapper='^compiler/\(.<span class="token italic"><span class="token punctuation">*</span><span class="token content">\)$' -&gt; '&lt;PROJECT_ROOT&gt;/src/compiler/\1'
module.name_mapper='^core/\(.</span><span class="token punctuation">*</span></span>\)$' -&gt; '<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PROJECT_ROOT</span><span class="token punctuation">&gt;</span></span>/src/core/\1'
module.name_mapper='^shared/\(.<span class="token italic"><span class="token punctuation">*</span><span class="token content">\)$' -&gt; '&lt;PROJECT_ROOT&gt;/src/shared/\1'
module.name_mapper='^web/\(.</span><span class="token punctuation">*</span></span>\)$' -&gt; '<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PROJECT_ROOT</span><span class="token punctuation">&gt;</span></span>/src/platforms/web/\1'
module.name_mapper='^weex/\(.<span class="token italic"><span class="token punctuation">*</span><span class="token content">\)$' -&gt; '&lt;PROJECT_ROOT&gt;/src/platforms/weex/\1'
module.name_mapper='^server/\(.</span><span class="token punctuation">*</span></span>\)$' -&gt; '<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PROJECT_ROOT</span><span class="token punctuation">&gt;</span></span>/src/server/\1'
module.name_mapper='^entries/\(.<span class="token italic"><span class="token punctuation">*</span><span class="token content">\)$' -&gt; '&lt;PROJECT_ROOT&gt;/src/entries/\1'
module.name_mapper='^sfc/\(.</span><span class="token punctuation">*</span></span>\)$' -&gt; '<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PROJECT_ROOT</span><span class="token punctuation">&gt;</span></span>/src/sfc/\1'
suppress_comment= \\(.\\|\n\\)*\\$flow-disable-line
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="认识目录结构"><a href="#认识目录结构" class="header-anchor">#</a> 认识目录结构</h2> <div class="language-markdown line-numbers-mode"><pre class="language-markdown"><code>├── scripts ------------------------------- 构建相关的文件，一般情况下我们不需要动
│   ├── git-hooks ------------------------- 存放git钩子的目录
│   ├── alias.js -------------------------- 别名配置
│   ├── config.js ------------------------- 生成rollup配置的文件
│   ├── build.js -------------------------- 对 config.js 中所有的rollup配置进行构建
│   ├── ci.sh ----------------------------- 持续集成运行的脚本
│   ├── release.sh ------------------------ 用于自动发布新版本的脚本
├── dist ---------------------------------- 构建后文件的输出目录
├── examples ------------------------------ 存放一些使用Vue开发的应用案例
├── flow ---------------------------------- 类型声明，使用开源项目 
<span class="token url">[<span class="token content">Flow</span>](<span class="token url">https://flowtype.org/</span>)</span>
├── packages ------------------------------ 存放独立发布的包的目录
├── test ---------------------------------- 包含所有测试文件
├── src ----------------------------------- 这个是我们最应该关注的目录，包含了源码
│   ├── compiler -------------------------- 编译器代码的存放目录，将 template 编译为 render 函数
│   ├── core ------------------------------ 存放通用的，与平台无关的代码
│   │   ├── observer ---------------------- 响应系统，包含数据观测的核心代码
│   │   ├── vdom -------------------------- 包含虚拟DOM创建(creation)和打补丁(patching)的代码
│   │   ├── instance ---------------------- 包含Vue构造函数设计相关的代码
│   │   ├── global-api -------------------- 包含给Vue构造函数挂载全局方法(静态方法)或属性的代码
│   │   ├── components -------------------- 包含抽象出来的通用组件
│   ├── server ---------------------------- 包含服务端渲染(server-side rendering)的相关代码
│   ├── platforms ------------------------- 包含平台特有的相关代码，不同平台的不同构建的入口文件也在这里
│   │   ├── web --------------------------- web平台
│   │   │   ├── entry-runtime.js ---------- 运行时构建的入口，不包含模板(template)到render函数的编译器，所以不支持 <span class="token code-snippet code keyword">`template`</span> 选项，我们使用vue默认导出的就是这个运行时的版本。大家使用的时候要注意
│   │   │   ├── entry-runtime-with-compiler.js -- 独立构建版本的入口，它在 entry-runtime 的基础上添加了模板(template)到render函数的编译器
│   │   │   ├── entry-compiler.js --------- vue-template-compiler 包的入口文件
│   │   │   ├── entry-server-renderer.js -- vue-server-renderer 包的入口文件
│   │   │   ├── entry-server-basic-renderer.js -- 输出 packages/vue-server-renderer/basic.js 文件
│   │   ├── weex -------------------------- 混合应用
│   ├── sfc ------------------------------- 包含单文件组件(.vue文件)的解析逻辑，用于vue-template-compiler包
│   ├── shared ---------------------------- 包含整个代码库通用的代码
├── package.json -------------------------- 不解释
├── yarn.lock ----------------------------- yarn 锁定文件
├── .editorconfig ------------------------- 针对编辑器的编码风格配置文件
├── .flowconfig --------------------------- flow 的配置文件
├── .babelrc ------------------------------ babel 配置文件
├── .eslintrc ----------------------------- eslint 配置文件
├── .eslintignore ------------------------- eslint 忽略配置
├── .gitignore ---------------------------- git 忽略配置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h2 id=""><a href="#" class="header-anchor">#</a></h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/" class="prev router-link-active">
        首页
      </a></span> <span class="next"><a href="/blog/JavaScript/Object.html">
        Object
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.61bc70fd.js" defer></script><script src="/blog/assets/js/2.c359e15b.js" defer></script><script src="/blog/assets/js/12.4cc5bca1.js" defer></script>
  </body>
</html>
